# transactionfee-info
This project provides protocol-level statistics and insights about Bitcoin: Blocks, Transactions, Script usage and more. Powered by a Rust backend and Hugo-based frontend.

## Prerequisites
- A Bitcoin Core node with the REST API enabled
- Installed development tools - `rustc`, `cargo`, `hugo`, _or_
- Alternative development environment - Nix (provides all development tools in an isolated environment)

### Bitcoin Core Setup
1. Add the following lines to your `bitcoin.conf`
2. Restart Bitcoin Core

```conf
# Enable REST API
rest=1
```

## Quick Start with Nix
With Nix installed enter a nix-shell to setup and start the backend and frontend

```bash
# Enter the development environment
nix-shell
```

### Backend

```bash
# Once in nix-shell..

# Setup and start the backend
cd backend
# This uses the default settings of connecting to localhost:8332
# creating a SQLite database in ./db.sqlite
# and writing the CSV files to ./csv
# See below for more details on the command-line arguments
cargo run --release
```

Note that this process could take many hours if you are starting from the genesis block!

### Frontend

The CSVs that are generated by the backend must be available in the `frontend/static/csv` directory for the charts to show.
They will need to be copied to there from the default `backend/csv` directory after the backend has been run.

```bash
# Once in nix-shell..

# Run the frontend
cd frontend
hugo server -D
```

Hugo will start serving the frontend on a webserver and provide an URL to it.

## Backend Configuration
The backend application accepts several command-line arguments to customise its behaviour:

```bash
cargo run -- --help
```

Available options:

- `--rest-host <HOST>`: Host part of the Bitcoin Core REST API endpoint (default: "localhost")
- `--rest-port <PORT>`: Port part of the Bitcoin Core REST API endpoint (default: 8332, same as Bitcoin Core's RPC port)
- `--database-path <PATH>`: Path to the SQLite database file (default: "./db.sqlite")
- `--csv-path <PATH>`: Directory where CSV files should be written (default: "./csv")
- `--no-csv`: Disable CSV file writing
- `--no-stats`: Disable stat generation

Example with custom settings:
```bash
cargo run -- --rest-host 127.0.0.1 --rest-port 8332 --database-path ./data/stats.db --csv-path ./data/csv
```
